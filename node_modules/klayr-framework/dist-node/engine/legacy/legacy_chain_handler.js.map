{"version":3,"file":"legacy_chain_handler.js","sourceRoot":"","sources":["../../../src/engine/legacy/legacy_chain_handler.ts"],"names":[],"mappings":";;;AAcA,wCAAqC;AAErC,6CAA0D;AAG1D,gDAAoE;AACpE,uCAAoC;AAEpC,mCAAyD;AACzD,qCAAyC;AACzC,yCAAiD;AAEjD,2CAKqB;AACrB,uCAA+D;AAC/D,sDAA2E;AAY3E,MAAM,IAAI,GAAG,KAAK,EAAE,QAAgB,EAA2B,EAAE,CAChE,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;IACrB,MAAM,OAAO,GAAG,UAAU,CAAC,GAAG,EAAE;QAC/B,OAAO,CAAC,OAAO,CAAC,CAAC;IAClB,CAAC,EAAE,QAAQ,CAAC,CAAC;AACd,CAAC,CAAC,CAAC;AAEJ,MAAa,kBAAkB;IAQ9B,YAAmB,IAA4B;QAH9B,oBAAe,GAAa,EAAE,CAAC;QAI/C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC;QACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;IAC5B,CAAC;IAEM,KAAK,CAAC,IAAI,CAAC,IAA2B;QAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAErC,KAAK,MAAM,WAAW,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE;YACtD,IAAI;gBACH,MAAM,iBAAiB,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;gBAC1E,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;gBAE5E,IAAI,CAAC,aAAa,EAAE;oBACnB,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,iBAAiB,EAAE;wBACrD,WAAW,EAAE,WAAW,CAAC,WAAW;wBACpC,mBAAmB,EAAE,WAAW,CAAC,cAAc;wBAE/C,eAAe,EAAE,WAAW,CAAC,cAAc;qBAC3C,CAAC,CAAC;oBACH,SAAS;iBACT;gBAED,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;gBAChF,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBAGjF,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,iBAAiB,EAAE;oBACrD,GAAG,iBAAiB;oBACpB,WAAW,EAAE,WAAW,CAAC,WAAW;oBACpC,mBAAmB,EAAE,WAAW,CAAC,cAAc;oBAE/C,eAAe,EAAE,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,cAAc;iBAClF,CAAC,CAAC;aACH;YAAC,OAAO,KAAK,EAAE;gBACf,IAAI,CAAC,CAAC,KAAK,YAAY,uBAAa,CAAC,EAAE;oBACtC,MAAM,KAAK,CAAC;iBACZ;aACD;SACD;IACF,CAAC;IAEM,IAAI;QACV,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACjC,CAAC;IAEM,KAAK,CAAC,IAAI;QAChB,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE;YAClD,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CACrD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,KAAK,CAAC,CAC3C,CAAC;YAGF,IAAI,OAAO,CAAC,WAAW,KAAK,WAAW,CAAC,eAAe,EAAE;gBACxD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;gBACvE,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;oBAC3B,MAAM,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;iBACjC,CAAC,CAAC;gBACH,SAAS;aACT;YACD,IAAI,WAAW,CAAC;YAChB,IAAI;gBACH,MAAM,SAAS,GAAG,IAAA,mBAAW,EAC5B,MAAM,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,WAAW,CAAC,eAAe,CAAC,CACjE,CAAC,KAAK,CAAC;gBACR,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC;aAClC;YAAC,OAAO,KAAK,EAAE;gBACf,IAAI,CAAC,CAAC,KAAK,YAAY,uBAAa,CAAC,EAAE;oBACtC,MAAM,KAAK,CAAC;iBACZ;gBAED,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;aAC1D;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAChB,2CAA+B,EAC/B,kEAAkE,OAAO,CAAC,eAAe,EAAE,CAC3F,CAAC;YAEF,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC,KAAK,CAAC,CAAC,GAAU,EAAE,EAAE,CAC9D,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,EAAE,iCAAiC,CAAC,CAC9D,CAAC;SACF;IACF,CAAC;IAEO,KAAK,CAAC,cAAc,CAC3B,OAA2B,EAC3B,WAAmB,EACnB,gBAAgB,GAAG,CAAC;QAEpB,IAAI;YACH,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,WAAW,EAAE,gBAAgB,CAAC,CAAC;SAC/D;QAAC,OAAO,KAAK,EAAE;YACf,IAAI,KAAK,YAAY,sBAAa,EAAE;gBACnC,IAAI,CAAC,OAAO,CAAC,KAAK,CACjB,2CAA+B,EAC/B,mEAAmE,OAAO,CAAC,eAAe,EAAE,CAC5F,CAAC;gBACF,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAChC,IAAI,CAAC,YAAY,GAAG,MAAM,IAAI,CAAC,qCAAyB,CAAC,CAAC;aAC1D;iBAAM;gBACN,IAAI,CAAC,OAAO,CAAC,KAAK,CACjB,EAAE,GAAG,2CAA+B,EAAE,KAAK,EAAG,KAAe,CAAC,OAAO,EAAE,EACvE,mEAAmE,OAAO,CAAC,eAAe,EAAE,CAC5F,CAAC;aACF;YACD,MAAM,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;SAChD;IACF,CAAC;IAkBO,KAAK,CAAC,WAAW,CACxB,OAA2B,EAC3B,WAAmB,EACnB,cAAc,GAAG,CAAC;QAElB,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAuB,CAAC;QAC9E,MAAM,mBAAmB,GAAG,cAAc,CAAC,MAAM,CAChD,IAAI,CAAC,EAAE,CACN,CAAC,CAAE,IAAI,CAAC,OAAgC,CAAC,MAAM,CAAC,IAAI,CACnD,eAAe,CAAC,EAAE,CAAC,eAAe,KAAK,OAAO,CAAC,eAAe,CAC9D,CACF,CAAC;QACF,IAAI,mBAAmB,CAAC,MAAM,KAAK,CAAC,EAAE;YACrC,MAAM,YAAY,GAAG,iCAAiC,CAAC;YACvD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,2CAA+B,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,YAAY,CAAC,CAAC;YAC9F,MAAM,IAAI,sBAAa,CAAC,YAAY,CAAC,CAAC;SACtC;QAED,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACnF,MAAM,EAAE,MAAM,EAAE,GAAG,mBAAmB,CAAC,eAAe,CAAC,CAAC;QAExD,MAAM,WAAW,GAAG,aAAK,CAAC,MAAM,CAAC,4CAAkC,EAAE;YACpE,OAAO,EAAE,WAAW;YACpB,eAAe,EAAE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,KAAK,CAAC;SAC5D,CAAC,CAAC;QACH,MAAM,gBAAgB,GAAqB;YAC1C,SAAS,EAAE,6CAAiC;YAC5C,IAAI,EAAE,WAAW;SACjB,CAAC;QAEF,IAAI,gBAAgB,GAAG,cAAc,CAAC;QACtC,IAAI,QAAQ,CAAC;QACb,IAAI;YACH,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,GAAG,gBAAgB,EAAE,MAAM,EAAE,CAAC,CAAC;YAEhF,gBAAgB,GAAG,CAAC,CAAC;SACrB;QAAC,OAAO,KAAK,EAAE;YAEf,gBAAgB,IAAI,CAAC,CAAC;YACtB,IAAI,gBAAgB,GAAG,+BAAmB,EAAE;gBAC3C,MAAM,YAAY,GAAG,UAAU,+BAAmB,8BAA8B,CAAC;gBACjF,IAAI,CAAC,OAAO,CAAC,IAAI,CAChB,EAAE,GAAG,2CAA+B,EAAE,MAAM,EAAE,MAAM,EAAE,iBAAiB,EAAE,EACzE,YAAY,CACZ,CAAC;gBAEF,MAAM,IAAI,sBAAa,CAAC,YAAY,CAAC,CAAC;aACtC;YACD,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,EAAE,gBAAgB,CAAC,CAAC;SACnE;QAGD,MAAM,EAAE,IAAI,EAAE,GAAG,QAA4B,CAAC;QAC9C,IAAI,YAA2B,CAAC;QAEhC,IAAI;YAEH,MAAM,EAAE,MAAM,EAAE,GAAG,aAAK,CAAC,MAAM,CAAuB,sCAA6B,EAAE,IAAI,CAAC,CAAC;YAC3F,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;gBACxB,IAAI,CAAC,yBAAyB,CAAC,yBAAyB,EAAE,MAAM,CAAC,CAAC;gBAElE,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,EAAE,gBAAgB,CAAC,CAAC;aACnE;YAED,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;YAE9B,YAAY,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,IAAA,mBAAW,EAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;SAC7D;QAAC,OAAO,GAAG,EAAE;YACb,IAAI,CAAC,yBAAyB,CAAE,GAAa,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAE/D,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,EAAE,gBAAgB,CAAC,CAAC;SACnE;QAED,KAAK,MAAM,KAAK,IAAI,YAAY,EAAE;YACjC,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,IAAI,OAAO,CAAC,WAAW,EAAE;gBAC/C,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC1D,MAAM,IAAI,CAAC,QAAQ,CAAC,SAAS,CAC5B,KAAK,CAAC,MAAM,CAAC,EAAY,EACzB,KAAK,CAAC,MAAM,CAAC,MAAM,EACnB,IAAA,yBAAiB,EAAC,KAAK,CAAC,MAAM,CAAC,EAC/B,OAAO,CACP,CAAC;aACF;SACD;QAED,MAAM,SAAS,GAAG,YAAY,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACxD,IAAI,SAAS,IAAI,SAAS,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC,WAAW,EAAE;YAC/D,IAAI,CAAC,OAAO,CAAC,KAAK,CACjB,2CAA+B,EAC/B,qBAAqB,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,OAAO,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,CAClF,CAAC;YACF,MAAM,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YAClD,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAChC,IAAI,CAAC,YAAY,GAAG,MAAM,IAAI,CAAC,sCAA0B,CAAC,CAAC;YAC3D,MAAM,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,SAAS,CAAC,MAAM,CAAC,EAAY,EAAE,gBAAgB,CAAC,CAAC;SACpF;aAAM;YAEN,IAAI,CAAC,OAAO,CAAC,IAAI,CAChB,2CAA+B,EAC/B,mEAAmE,OAAO,CAAC,eAAe,EAAE,CAC5F,CAAC;YAGF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;YACvE,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;gBAC3B,MAAM,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;aACjC,CAAC,CAAC;SACH;QAED,OAAO,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;IACpD,CAAC;IAEO,KAAK,CAAC,kBAAkB,CAAC,SAAsB,EAAE,OAA2B;QACnF,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,KAAK,CAAC,EAAE;YAC/E,WAAW,EAAE,OAAO,CAAC,WAAW;YAChC,eAAe,EAAE,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,MAAM,CAAC,MAAM;YACzC,mBAAmB,EAAE,OAAO,CAAC,cAAc;SAC3C,CAAC,CAAC;IACJ,CAAC;IAEO,yBAAyB,CAAC,GAAW,EAAE,MAAc;QAC5D,IAAI,CAAC,OAAO,CAAC,IAAI,CAChB,EAAE,GAAG,2CAA+B,EAAE,MAAM,EAAE,EAC9C,GAAG,GAAG,kCAAkC,CACxC,CAAC;QACF,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;IAC5D,CAAC;IAEO,gBAAgB,CAAC,MAAgB;QACxC,MAAM,YAAY,GAAG,EAAE,CAAC;QACxB,KAAK,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;YAC/C,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7B;QAED,MAAM,kBAAkB,GAAG,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,IAAA,mBAAW,EAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;QAE/E,YAAY,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE;YACrC,IAAI,KAAK,GAAG,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBAEpC,IAAA,8BAAmB,EAAC,KAAK,EAAE,kBAAkB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;aAC1D;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;CACD;AAtRD,gDAsRC"}
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.shuffleValidatorList = void 0;
const cryptography_1 = require("@klayr/cryptography");
const shuffleValidatorList = (roundSeed, addresses) => {
    const validatorList = [...addresses].map(validator => ({
        ...validator,
        roundHash: Buffer.from([]),
    }));
    for (const validator of validatorList) {
        const seedSource = Buffer.concat([roundSeed, validator.address]);
        validator.roundHash = cryptography_1.utils.hash(seedSource);
    }
    validatorList.sort((validator1, validator2) => {
        const diff = validator1.roundHash.compare(validator2.roundHash);
        if (diff !== 0) {
            return diff;
        }
        return validator1.address.compare(validator2.address);
    });
    return validatorList;
};
exports.shuffleValidatorList = shuffleValidatorList;
//# sourceMappingURL=shuffleValidatorList.js.map